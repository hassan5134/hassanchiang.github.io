<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="referrer" content="no-referrer-when-downgrade">
  
  <meta name="baidu-site-verification" content="" />
  <meta name="google-site-verification" content="" />
  <meta name="msvalidate.01" content="" />
  <meta name="360-site-verification" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- if page has tags, then add tags to keyword -->
  
  
  <meta name="keywords" content=",">
  <!-- page.description has higher priority -->
  <meta name="description" content="Share everything">
  <link rel="shortcut icon" href="/favico.png">
  <title>
    
    Javaç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜æ€§èƒ½æµ‹è¯• | åˆ†äº«ä¹‹
    
  </title>

  <link rel="canonical" href="/post/java/nio/2019-07-22_java_nio_Javaç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜æ€§èƒ½æµ‹è¯•.html">
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/layout.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  <!-- Pygments Highlight CSS -->
  
<link rel="stylesheet" href="/css/highlight.css">

  
<link rel="stylesheet" href="/css/geektutu.css">

  <!-- global function -->
  <script>
    window.globalAddScript = function (url, onload, onerror) {
      var s = document.createElement('script');
      s.src = url;
      onload && (s.onload = onload);
      onerror && (s.onerror = onerror);
      document.body.appendChild(s);
    }
    window.globalAddCss = function (url) {
      var s = document.createElement('link');
      s.rel = 'stylesheet';
      s.href = url;
      document.body.appendChild(s);
    }
    window.getPosition = function (ele) {
      var x = 0, y = 0;
      while (ele) {
        x += (ele.offsetLeft - ele.scrollLeft + ele.clientLeft);
        y += (ele.offsetTop - ele.scrollTop + ele.clientTop);
        ele = ele.offsetParent;
      }
      return { x: x, y: y };
    }
    window.getDom = function (str) { return document.querySelector(str) }
  </script>
  <!-- google ad -->
  
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/feed.xml" title="åˆ†äº«ä¹‹" type="application/rss+xml">
</head>

<body>
    <header class="gkt-header col-xs-12 padding-0">
    <div id="gkt-nav" class="gkt-header-container">
        <a href="/" class="gkt-header-title float-left">
            <img class="float-left" src="/favico.png" alt="">
            <span>åˆ†äº«ä¹‹</span>
        </a>
        <nav class="gkt-header-nav text-right">
            <ul>
                <li><a class="hidden-xs" href="/feed.xml">è®¢é˜…</a></li>
                <li><a href="/series/">ä¸“é¢˜</a></li>
                <li><a href="/archives/">å½’æ¡£</a></li>
                <li><a href="/post/link.html">å‹é“¾</a></li>
                <li><a href="/post/about.html">å…³äº</a></li>
            </ul>
        </nav>
    </div>
    <div id="gkt-cate-nav" class="gkt-header-container hidden-xs">
        
        <nav class="gkt-header-nav float-left">
            <ul>
                
                
            </ul>
        </nav>
    </div>
</header>
<div class="gkt-header-placeholder" style="height: 44px"></div>
<div class="gkt-header-placeholder hidden-xs" style="height: 44px"></div>
<script>
    (function () {
        window.addEventListener('scroll', function () {
            if (window.innerWidth < 768) {
                return;
            }
            var nav = document.querySelector('#gkt-nav');
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            scrollTop > 50 && (nav.classList.add('hide'));
            scrollTop <= 50 && (nav.classList.remove('hide'));
        });
        var cateNavs = document.querySelectorAll('#gkt-cate-nav>nav>ul>li');
        [].slice.call(cateNavs).forEach(function (item) {
            var sub = item.querySelector('.gkt-sub-cate');
            if (!sub) return;
            item.addEventListener('mouseenter', function (e) { sub.style.display = 'block'; }, false);
            item.addEventListener('mouseleave', function (e) { sub.style.display = 'none'; }, false);
        })
    })();
</script>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Main Content -->
<main class="col-xs-12 padding-0 markdown-it">
    <!-- Post Container -->
    
    
    <!-- Post Content -->
<div class="float-left post-container box-shadow">
    <div class="u-arrow-wrapper hidden-xs">
        
        <a class="float-left" href="/post/java/advance/2019-05-04_java_labmda.html"><i class="u-arrow-left"></i></a>
        
        
        <a class="float-right" href="/post/java/advance/2019-07-22_java_stack.html"><i class="u-arrow-right"></i></a>
        
    </div>
    <article class="col-xs-12">
        <h1> Javaç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜æ€§èƒ½æµ‹è¯• </h1>
        
        
        
        <h2 id="ä»€ä¹ˆæ˜¯ç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜"><a href="#ä»€ä¹ˆæ˜¯ç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜" class="headerlink" title="ä»€ä¹ˆæ˜¯ç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜"></a>ä»€ä¹ˆæ˜¯ç›´æ¥å†…å­˜ä¸éç›´æ¥å†…å­˜</h2><p>æ ¹æ®å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼š</p>
<blockquote>
<p>A byte bufferis either direct or non-direct. Given a direct byte buffer, the Java virtual machine will make a best effort to perform native I/O operations directly upon it. That is, it will attempt to avoid copying the bufferâ€™s content to (or from) an intermediate buffer before (orafter) each invocation of one of the underlying operating systemâ€™s native I/O operations.</p>
</blockquote>
<p><code>byte byffer</code>å¯ä»¥æ˜¯ä¸¤ç§ç±»å‹ï¼Œä¸€ç§æ˜¯åŸºäºç›´æ¥å†…å­˜ï¼ˆä¹Ÿå°±æ˜¯éå †å†…å­˜ï¼‰ï¼›å¦ä¸€ç§æ˜¯éç›´æ¥å†…å­˜ï¼ˆä¹Ÿå°±æ˜¯å †å†…å­˜ï¼‰ã€‚</p>
<p>å¯¹äºç›´æ¥å†…å­˜æ¥è¯´ï¼ŒJVMå°†ä¼šåœ¨IOæ“ä½œä¸Šå…·æœ‰æ›´é«˜çš„æ€§èƒ½ï¼Œå› ä¸ºå®ƒç›´æ¥ä½œç”¨äºæœ¬åœ°ç³»ç»Ÿçš„IOæ“ä½œã€‚è€Œéç›´æ¥å†…å­˜ï¼Œä¹Ÿå°±æ˜¯å †å†…å­˜ä¸­çš„æ•°æ®ï¼Œå¦‚æœè¦ä½œIOæ“ä½œï¼Œä¼šå…ˆå¤åˆ¶åˆ°ç›´æ¥å†…å­˜ï¼Œå†åˆ©ç”¨æœ¬åœ°IOå¤„ç†ã€‚</p>
<p>ä»æ•°æ®æµçš„è§’åº¦ï¼Œéç›´æ¥å†…å­˜æ˜¯ä¸‹é¢è¿™æ ·çš„ä½œç”¨é“¾ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ¬åœ°IO--&gt;ç›´æ¥å†…å­˜--&gt;éç›´æ¥å†…å­˜--&gt;ç›´æ¥å†…å­˜--&gt;æœ¬åœ°IO</span><br></pre></td></tr></table></figure>

<p>è€Œç›´æ¥å†…å­˜æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ¬åœ°IO--&gt;ç›´æ¥å†…å­˜--&gt;æœ¬åœ°IO</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾ï¼Œå†åšIOå¤„ç†æ—¶ï¼Œæ¯”å¦‚ç½‘ç»œå‘é€å¤§é‡æ•°æ®æ—¶ï¼Œç›´æ¥å†…å­˜ä¼šå…·æœ‰æ›´é«˜çš„æ•ˆç‡ã€‚</p>
<blockquote>
<p>A direct byte buffer may be created by invoking the allocateDirect factory method of this class. The buffers returned by this method typically have somewhat higher allocation and deallocation costs than non-direct buffers. The contents of direct buffers may reside outside of the normal garbage-collected heap, and so their impact upon the memory footprint of an application might not be obvious. It is therefore recommended that direct buffers be allocated primarily for large, long-lived buffers that are subject to the underlying systemâ€™s native I/O operations. In general it is best to allocate direct buffers only when they yield a measureable gain in program performance.</p>
</blockquote>
<p>ä½†æ˜¯ï¼Œä¸è¦é«˜å…´çš„å¤ªæ—©ã€‚æ–‡æ¡£ä¸­ä¹Ÿè¯´äº†ï¼Œç›´æ¥å†…å­˜ä½¿ç”¨allocateDirectåˆ›å»ºï¼Œä½†æ˜¯å®ƒæ¯”ç”³è¯·æ™®é€šçš„å †å†…å­˜éœ€è¦è€—è´¹æ›´é«˜çš„æ€§èƒ½ã€‚ä¸è¿‡ï¼Œè¿™éƒ¨åˆ†çš„æ•°æ®æ˜¯åœ¨JVMä¹‹å¤–çš„ï¼Œå› æ­¤å®ƒä¸ä¼šå ç”¨åº”ç”¨çš„å†…å­˜ã€‚</p>
<p>æ‰€ä»¥å‘¢ï¼Œå½“ä½ æœ‰å¾ˆå¤§çš„æ•°æ®è¦ç¼“å­˜ï¼Œå¹¶ä¸”å®ƒçš„ç”Ÿå‘½å‘¨æœŸåˆå¾ˆé•¿ï¼Œé‚£ä¹ˆå°±æ¯”è¾ƒé€‚åˆä½¿ç”¨ç›´æ¥å†…å­˜ã€‚åªæ˜¯ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœä¸æ˜¯èƒ½å¸¦æ¥å¾ˆæ˜æ˜¾çš„æ€§èƒ½æå‡ï¼Œè¿˜æ˜¯æ¨èç›´æ¥ä½¿ç”¨å †å†…å­˜ã€‚</p>
<p>å…³äºç›´æ¥å†…å­˜éœ€è¦æ³¨æ„çš„ï¼Œå°±æ˜¯ä¸Šé¢ä¸¤ç‚¹äº†ï¼Œå…¶ä»–çš„å…³äºè§†å›¾å•Šã€ä½œç”¨é“¾å•Šï¼Œéƒ½æ˜¯ä½¿ç”¨ä¸Šçš„é—®é¢˜äº†ã€‚å¦‚æœæœ‰å…´è¶£ï¼Œå¯ä»¥<a target="_blank" rel="noopener" href="http://docs.oracle.com/javase/8/docs/api/">å‚è€ƒå®˜æ–¹API ( è¿›å»åæœç´¢ByteBufferï¼Œå°±èƒ½çœ‹åˆ°ï¼)</a>ï¼Œé‡Œé¢æœ‰å°‘é‡çš„æè¿°ï¼é‡è¦çš„ä¸€äº›ç”¨æ³•ï¼Œè¿˜å¾—è‡ªå·±æ‘¸ç´¢ã€‚</p>
<h2 id="ä½¿ç”¨åœºæ™¯"><a href="#ä½¿ç”¨åœºæ™¯" class="headerlink" title="ä½¿ç”¨åœºæ™¯"></a>ä½¿ç”¨åœºæ™¯</h2><p>é€šè¿‡ä¸Šé¢çš„å®˜æ–¹æ–‡æ¡£ï¼Œä¸ä¸€äº›èµ„æ–™çš„æœç´¢ã€‚å¯ä»¥æ€»ç»“ä¸‹ï¼Œç›´æ¥å†…å­˜çš„ä½¿ç”¨åœºæ™¯ï¼š</p>
<ul>
<li>1 æœ‰å¾ˆå¤§çš„æ•°æ®éœ€è¦å­˜å‚¨ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸåˆå¾ˆé•¿</li>
<li>2 é€‚åˆé¢‘ç¹çš„IOæ“ä½œï¼Œæ¯”å¦‚ç½‘ç»œå¹¶å‘åœºæ™¯</li>
</ul>
<h2 id="ç”³è¯·åˆ†é…åœ°å€é€Ÿåº¦æ¯”è¾ƒ"><a href="#ç”³è¯·åˆ†é…åœ°å€é€Ÿåº¦æ¯”è¾ƒ" class="headerlink" title="ç”³è¯·åˆ†é…åœ°å€é€Ÿåº¦æ¯”è¾ƒ"></a>ç”³è¯·åˆ†é…åœ°å€é€Ÿåº¦æ¯”è¾ƒ</h2><p>ä¸‹é¢ç”¨ä¸€æ®µç®€å•çš„ä»£ç ï¼Œæµ‹è¯•ä¸‹ç”³è¯·å†…å­˜ç©ºé—´çš„é€Ÿåº¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">inttime &#x3D; 10000000;</span><br><span class="line">Date begin &#x3D; newDate();</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    ByteBuffer buffer &#x3D; ByteBuffer.allocate(2);</span><br><span class="line">&#125;</span><br><span class="line">Dateend &#x3D; newDate();</span><br><span class="line">System.out.println(end.getTime()-begin.getTime());</span><br><span class="line">begin &#x3D; newDate();</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    ByteBuffer buffer &#x3D; ByteBuffer.allocateDirect(2);</span><br><span class="line">&#125;</span><br><span class="line">end &#x3D; newDate();</span><br><span class="line">System.out.println(end.getTime()-begin.getTime());</span><br></pre></td></tr></table></figure>

<p>å¾—åˆ°çš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="./2019-07-22_java_nio_Java%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E4%B8%8E%E9%9D%9E%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/1.png"></p>
<p>åœ¨æ•°æ®é‡æå‡æ—¶ï¼Œç›´æ¥å†…å­˜ç›¸æ¯”äºéç›´æ¥å†…å­˜çš„ç”³è¯· æœ‰ååˆ†ååˆ†ååˆ†æ˜æ˜¾çš„æ€§èƒ½é—®é¢˜ï¼</p>
<h2 id="è¯»å†™é€Ÿåº¦æ¯”è¾ƒ"><a href="#è¯»å†™é€Ÿåº¦æ¯”è¾ƒ" class="headerlink" title="è¯»å†™é€Ÿåº¦æ¯”è¾ƒ"></a>è¯»å†™é€Ÿåº¦æ¯”è¾ƒ</h2><p>ç„¶ååœ¨å†™æ®µä»£ç ï¼Œæµ‹è¯•ä¸‹è¯»å†™çš„é€Ÿåº¦ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">inttime &#x3D; 1000;</span><br><span class="line">Date begin &#x3D; newDate();</span><br><span class="line">ByteBuffer buffer &#x3D; ByteBuffer.allocate(2*time);</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    buffer.putChar(&#39;a&#39;);</span><br><span class="line">&#125;</span><br><span class="line">buffer.flip();</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    buffer.getChar();</span><br><span class="line">&#125;</span><br><span class="line">Dateend &#x3D; newDate();</span><br><span class="line">System.out.println(end.getTime()-begin.getTime());</span><br><span class="line">begin &#x3D; newDate();</span><br><span class="line">ByteBuffer buffer2 &#x3D; ByteBuffer.allocateDirect(2*time);</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    buffer2.putChar(&#39;a&#39;);</span><br><span class="line">&#125;</span><br><span class="line">buffer2.flip();</span><br><span class="line">for(int i&#x3D;0;i&lt;time;i++)&#123;</span><br><span class="line">    buffer2.getChar();</span><br><span class="line">&#125;</span><br><span class="line">end &#x3D; newDate();</span><br><span class="line">System.out.println(end.getTime()-begin.getTime());</span><br></pre></td></tr></table></figure>

<p>æµ‹è¯•çš„ç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="./2019-07-22_java_nio_Java%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E4%B8%8E%E9%9D%9E%E7%9B%B4%E6%8E%A5%E5%86%85%E5%AD%98%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95/2.png"></p>
<p>å¯ä»¥çœ‹åˆ°ç›´æ¥å†…å­˜åœ¨ç›´æ¥çš„IOæ“ä½œä¸Šï¼Œè¿˜æ˜¯æœ‰æ˜æ˜¾çš„å·®å¼‚çš„ï¼</p>
<p>  ä½œè€…ï¼š<a target="_blank" rel="noopener" href="http://www.cnblogs.com/xing901022">xingoo</a></p>
<p>  å‡ºå¤„ï¼š<a target="_blank" rel="noopener" href="http://www.cnblogs.com/xing901022">http://www.cnblogs.com/xing901022</a></p>

        
<script src="/js/qrious.min.js"></script>


        <hr>
        <div>
            
            <p>
                <span>æœ¬æ–‡å‘è¡¨äº 2019-07-22ï¼Œæœ€åä¿®æ”¹äº 2020-11-25ã€‚</span>
            </p>
            <!-- æ–‡ç« æœ«å°¾çš„æç¤º start -->
            
            
            
                
            <!-- æ–‡ç« æœ«å°¾çš„æç¤º end -->
        </div>
        <hr />
        <p name="pagination" style="font-size: 1.2em">
    
    <a class="float-left" href="/post/java/advance/2019-05-04_java_labmda.html">ä¸Šä¸€ç¯‡ Â« Java8æ–°ç‰¹æ€§å­¦ä¹ -å‡½æ•°å¼ç¼–ç¨‹</a>
    
    
    <a class="float-right" href="/post/java/advance/2019-07-22_java_stack.html">ä¸‹ä¸€ç¯‡ Â» JVMå†…å­˜ç»“æ„ï¼šå †ã€æ ˆã€æ–¹æ³•åŒº</a>
    
</p>
    </article>
    <!-- èµèµ -->
    <!--æ‰“èµ-->

    <!-- æ¨èé˜…è¯»ä¸‰ç¯‡æ–‡ç«  -->
    <div class="col-xs-12">
        <h3>æ¨èé˜…è¯»</h3>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/images/java/io.png')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/java/nio/2019-04-07_java_nio_ä½¿ç”¨æ³¨æ„ç‚¹.html" class="title">
                NIO å„ç§ä½¿ç”¨æ³¨æ„ç‚¹
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2019-04-07ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡6184å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦21åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/images/java/basic/java_logo.png')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/java/basic/2019-01-21_java_thread_source.html" class="title">
                ä»æºç çš„è§’åº¦å†å­¦ã€ŒThreadã€
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2019-01-21ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡19165å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦64åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/about.html" class="title">
                å…³äºæˆ‘
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2012-11-03ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡73å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦1åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
    </div>
    <div class="col-xs-12">
        <!-- æ ‡ç­¾åˆ—è¡¨ -->
        <!-- Featured Tags -->
<style>
    #featured-tag .post-tag-item {
        font-size: 12px;
        line-height: 30px;
        display: inline-block;
        height: 30px;
        margin: 5px 0px;
        padding: 0 7px;
        color: #333;
        border-radius: 15px;
        background: #f6f6f6;
    }

    #featured-tag .post-tag-item:hover {
        color: #337ab7;
    }
</style>
<div id="featured-tag">
    
</div>
    </div>
    <!-- è¯„è®º -->
    
    <div class="col-xs-12">
        
<div class="col-xs-12 padding-0">
    <div id="gitalk-container">
        <div class="gt-container text-center" style="margin-top: 50px;">
            <button class="gt-btn gt-btn-public"><span class="gt-btn-text">å» Github è¯„è®º</span></button>
        </div>
    </div>
    <div id="gitalk-related"></div>
</div>

<link rel="stylesheet" href="/css/gitalk.css">


<script src="/js/gitalk.min.js"></script>

<script>
    window.addEventListener('load', function () {
        function renderCommentUrl(data) {
            var url = (data[window.location.pathname] || {}).url
            url && getDom('#gitalk-container button').addEventListener('click', function (e) { window.open(url)})
            url || (getDom('#gitalk-container').style.display = 'none')
        }
        const gitalk = new Gitalk({
            clientID: 'a33ab8f0fc90bd0b86d7',
            clientSecret: '8dfa9e4100d0b59b5319450b32b8752298e3aafc',
            accessToken: '',
            repo: 'blogcmt',
            owner: 'HassanChiang',
            admin: ['HassanChiang'],
            id: window.location.pathname,
            distractionFreeMode: false
        });
        fetch("https://api.github.com/user").then(function(resp){
            gitalk.render('gitalk-container');
        }).catch(function(e){
            fetch('/tool/issues.json').then(function (r) { return r.json() }).then(renderCommentUrl).catch(function (e) { })
        })
        getDom('#gitalk-container').addEventListener('click', function (e) {
            e && e.stopPropagation && e.stopPropagation();
        });
    })
</script>
<script>
    window.addEventListener('load', function () {
        function render(comments) {
            var template = '<a href="${comment.url}?utm_source=gitalk" class="dis-item-url"><h3 class="dis-item-title">${comment.title}</h3>' +
                '<p class="dis-item-des">${comment.count} è¯„è®º â— ${comment.date}</p>' +
                '<div class="dis-item-content"><img class="dis-item-img" src="${comment.icon}" alt="icon"><p><b><span class="dis-item-user">${comment.user}</span></b>&nbsp;â€”â€”&nbsp;${comment.body}</p></div>' +
                '</a>'

            var wrapper = getDom('#gitalk-related');
            comments = shuffle(comments);
            comments.slice(0, 4).forEach(function (c) {
                var div = document.createElement('div');
                div.classList.add('dis-item');
                div.innerHTML = template.replace("${comment.url}", c.url)
                    .replace("${comment.title}", c.title)
                    .replace("${comment.count}", c.count)
                    .replace("${comment.date}", c.date)
                    .replace("${comment.icon}", c.icon)
                    .replace("${comment.user}", c.user)
                    .replace("${comment.body}", c.body)
                wrapper.appendChild(div)
            })
            var p = document.createElement('p')
            p.innerHTML = '<a target="_blank" rel="noopener" href="https://geektutu.com/post/blog-experience-7.html">Gitalk Plus</a>';
            p.classList.add('dis-divide');
            wrapper.appendChild(p);
            wrapper.classList.add('dis-wrapper')
        }
        function shuffle(a) {
            for (var i = a.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }
        fetch('/tool/comments.json').then(function (r) { return r.json() }).then(render).catch(function (e) { })
    })
</script>

    </div>
    
</div>
<aside class="float-left gkt-sidebar hidden-xs hidden-sm">
    <div style="clear: both"></div>
    <div class="gkt-sidebar-wrapper">
        <section class="box-shadow"><style>
    .gkt-summary {
        border: 1px solid #DDDDDD;
        border-radius: 3px;
        padding: 5px;
        width: 100%;
    }


    .gkt-summary nav {
        overflow: hidden;
    }

    .gkt-summary nav a {
        display: inline-block;
        text-align: center;
        color: #333;
        font-size: 12px;
    }

    .gkt-summary nav span {
        display: block;
    }

    .gkt-summary nav .middle {
        border-left: 1px solid #eaecef;
        border-right: 1px solid #eaecef;
    }

    .gkt-summary .number {
        font-weight: bold;
    }

    .gkt-summary .link-list {
        margin-top: 5px;
        margin-bottom: -5px;
        padding-top: 7px;
        border-top: 1px dashed #999;
        display: flex;
    }

    .gkt-summary .link-list a {
        flex: 1;
    }

    .gkt-summary .link-list img {
        width: 25px;
        height: 25px;
    }
</style>

<div class="gkt-summary">
    <nav>
        <a href="/" class="col-xs-4">
            <span class="number">114</span><span>æ–‡ç« </span>
        </a>
        <a href="/series" class="col-xs-4 middle">
            <span class="number">0</span><span>ä¸“é¢˜</span>
        </a>
        <a href="/tags" class="col-xs-4">
            <span class="number">0</span><span>æ ‡ç­¾</span>
        </a>
    </nav>

    
</div></section>
        
        
        
        <section class="gkt-sidebar-content box-shadow">
            <strong>æœ€è¿‘çš„æ–‡ç« </strong>
            <ul>
                
                <li>
                    <a href="/post/linux/2020-12-16_åŸæ¥8å¼ å›¾ï¼Œå°±å¯ä»¥ææ‡‚ã€Œé›¶æ‹·è´ã€äº†.html">åŸæ¥ 8 å¼ å›¾ï¼Œå°±å¯ä»¥ææ‡‚ã€Œé›¶æ‹·è´ã€äº†</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/Redis/2020_12_08_Redisæ¸…ç†æ–¹æ³•.html">Rediså­˜å‚¨ä¼˜åŒ–</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-28_çŒ´å­ç®¡ç†æ³•åˆ™.html">çŒ´å­ç®¡ç†æ³•åˆ™</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-27_ã€è®¤çŸ¥å‡çº§ã€æ˜¯æ¯”å…¶ä»–ä¸€åˆ‡éƒ½æ›´åŠ é‡è¦çš„æ€ç»´æ¨¡å‹è½¬å˜.html">ã€è®¤çŸ¥å‡çº§ã€æ˜¯æ¯”å…¶ä»–ä¸€åˆ‡éƒ½æ›´åŠ é‡è¦çš„æ€ç»´æ¨¡å‹è½¬å˜</a>
                </li>
                
                <li>
                    <a href="/post/util/2020-11-26_å¼€å‘èµ„æºæ•´ç†.html">å¼€å‘èµ„æºå¯¼èˆª</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-26_Jiraä¿®æ”¹Pathè·¯å¾„åçš„ç”¨æˆ·ç®¡ç†é—®é¢˜.html">Jira ä¿®æ”¹ Path è·¯å¾„åçš„ç”¨æˆ·ç®¡ç†é—®é¢˜</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-10-25_V2rayé…ç½®.html">V2ray é…ç½®</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-13_MySQLä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨å†…éƒ¨ä¸´æ—¶è¡¨.html">MySQLä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨å†…éƒ¨ä¸´æ—¶è¡¨?</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-12_MySQLä¸­çš„Character_Setä¸Collation.html">MySQL ä¸­çš„ Character Set ä¸ Collation</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-11_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(2).html">é«˜æ€§èƒ½ MySQL é˜…è¯»ç¬”è®° (2)</a>
                </li>
                
            </ul>
        </section>
        
    </div>
</aside>

<script>
    (function () {
        function resizeUArrow() {
            var s = getDom('.u-arrow-wrapper').style
            var pc = getDom('.post-container')
            s.left = getPosition(pc).x + 'px';
            s.width = pc.clientWidth + 'px';
        }
        resizeUArrow()
        window.addEventListener('resize', resizeUArrow);
    })();
</script>

    

<script>
    (function () {
        var ele = getDom('.gkt-sidebar-content')
        if(!ele) return;
        var wrapper = getDom('.gkt-sidebar-wrapper')
        var last = 0
        ele.style.maxHeight = ((window.innerHeight || 798) - 200) + 'px'
        var f = function (e) {
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            var isDown = scrollTop > last;
            var pos = getPosition(ele).y - scrollTop;
            var downLimit = 50;
            var upLimit = -100;
            // uarrow.style.marginTop = scrollTop + 'px';
            isDown && pos <= downLimit && wrapper.classList.add("gkt-sidebar-fixed");
            !isDown && pos > upLimit && wrapper.classList.remove("gkt-sidebar-fixed");
            last = scrollTop
        }
        f()
        window.addEventListener("scroll", f)
    })();
</script>

</main>
    </div>
    <style>
    img#go-top {
        position: fixed;
        bottom: 100px;
        width: 50px;
        cursor: pointer;
        z-index: 9999;
    }
</style>
<img id="go-top" src="/icon/top.png" class="hidden-xs" style="display: none" />
<script>
    (function () {
        var goTop = document.getElementById('go-top');
        var mainContainer = document.querySelector('.main-container');
        
        goTop.addEventListener('click', function () {
            window.scroll(0, 0);
        }, false);
        window.addEventListener('scroll', function () {
            var right = document.body.offsetWidth - mainContainer.getBoundingClientRect().right;
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            goTop.style.right = right + 10 + 'px'
            scrollTop > 700 && (goTop.style.display = "block");
            scrollTop <= 700 && (goTop.style.display = "none");
        });
    })();
</script>
    <style>
    #geektutu-click-img-container {
        position: fixed;
        left: 0;
        top: 0;
        text-align: center;
        width: 100%;
        display: none;
        z-index: 9999;
    }

    #geektutu-click-img-container img {
        object-fit: contain;
        background: #eaecef;
        padding: 15px;
        border-radius: 10px;
        height: auto;
        width: auto;
        vertical-align: middle;
    }
</style>


<div id="geektutu-click-img-container">
    <img src="" alt="Big Image">
</div>

<script>
    (function () {
        var container = document.querySelector('#geektutu-click-img-container')
        var targetImg = container.querySelector('img')
        var imgs = document.querySelectorAll('article img');
        targetImg.addEventListener('click', function (e) {
            container.style.display = 'none';
            e && e.stopPropagation && e.stopPropagation();
        }, false);

        for (var i = 0; i < imgs.length; ++i) {
            var img = imgs[i];
            img.addEventListener('click', (function (src, rate) {
                return function (e) {
                    e && e.stopPropagation && e.stopPropagation();
                    if (window.innerWidth < 980) {
                        return
                    }
                    targetImg.style.height = targetImg.style.width = 'auto';
                    if (window.innerWidth / window.innerHeight > rate) {
                        targetImg.style.height = (window.innerHeight - 20) + 'px';
                    } else {
                        targetImg.style.width = (window.innerWidth - 20) + 'px';
                    }
                    container.style.height = window.innerHeight + 'px'
                    container.style.lineHeight = window.innerHeight + 'px'
                    container.style.display = 'block';
                    targetImg.src = src;
                };
            }(img.src, img.width / img.height)), false)
        }
    })();
</script>
    <!-- Footer -->
    <!-- Footer -->
<style>
    footer {
        width: 100%;
        line-height: 1.5;
        padding: 20px;
    }

    footer a {
        color: #333;
        text-decoration: none;
    }

    .footer-hexo img {
        height: 20px;
        margin-bottom: -5px;
    }

    .footer-hexo a {
        color: #337ab7;
    }
</style>
<footer class="text-center col-xs-12">
    <p>
        <small>Â© 2020 - Hassan - </small>
        <small>
            <a target="_blank" rel="nofollow noopener" href="http://beian.miit.gov.cn/"></a>
        </small>
    </p>
    <p class="footer-hexo">
        <!-- ä½†è‹¥ç›´æ¥ä½¿ç”¨æˆ–ä¿®æ”¹ä¸»é¢˜ï¼Œè¯·åŠ¡å¿…ä¿ç•™è¿™æ®µå£°æ˜ -->
        <small>Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme
            <a target="_blank" href="https://geektutu.com">Geektutu</a>
            <a target="_blank" rel="noopener" href="https://github.com/geektutu/hexo-theme-geektutu">
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYGBgYHBgcICAcKCwoLCg8ODAwODxYQERAREBYiFRkVFRkVIh4kHhweJB42KiYmKjY+NDI0PkxERExfWl98fKcBBgYGBgcGBwgIBwoLCgsKDw4MDA4PFhAREBEQFiIVGRUVGRUiHiQeHB4kHjYqJiYqNj40MjQ+TERETF9aX3x8p//CABEIACIAUAMBIgACEQEDEQH/xAAcAAABBAMBAAAAAAAAAAAAAAAAAQQFBwIDBgj/2gAIAQEAAAAA9KrHSgAYL5/z6zZGuJd12uugbhq3uKtmuRtix20IS7lTLAfAAAn/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAAAB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAxAAAAAAAf/EADEQAAICAQIEBQEGBwAAAAAAAAECAwQFAAYREhORBxQhUlQxQVFic5KxJDJCYYGC0f/aAAgBAQABPwCFHnjWUzuvN6hV4cANSRLGjO9yRVUcSzMoA7jVXJYe5N0a2dhmk9kc0bN2GvLN8mbuNeWb5M3ca8s3yZu415Y/Jm7jXlm+TN3H/NeVPyZu40vOk3TZywK8wJ+v3EHVM/wsI/Dq2lrxN3Nnca16eti8chSAIoMbzByhMwP14kHVfwIiSaF5c96J6kwwCOTnHsYk8uvCrdmQy1TI4rJuz3cZLyGR/wCd4+YoOf8AEpUjXitubLYPG4paFsUxcuiGe7yc5gTW3LW44szXmobsi3Dhmic2+Z4+vCVH9CpraPiQ+QvbgTJrPFBWd5YpWrmNIIEXiRO32Pqt4p7cnfHk18lFBdmEVW1LVdIZGOrniTt6plrWKaO69yCykDRxwF+LMAewB0Txtr+Sf31VI8tEPw62fZt7N3Humtbpzz13ucX6CGSWMSuzpLyD1eNgeUka3PuvHbaxq3biTMHfkiSNCS78CwU+3Xg7Vu3MhuTcU6cq3Zemn3Eh2dv8Lzcut+29x1atKbHYqLJUhLwyNMwiZ3j9yDWOxUOV3tgb+3No5LDx1pi9+aeIwRlNY6bc+Jv+IFGrhLxtXJZ7VKcw81diiAAEn0JOrkWZyNfbEr0tz27UGQgkuGzXdIIvyowq99bRxk9ffO/L81SZBPZgEEroQroIxxMZOgeNsfkn99QypHGqO4Vl9CDrN4LDZkwyzyyQ2IgRHZrzGCZVP1XnQglT9oOtw4LC7iqV6uRkZoYpxKFSQpzFRw4EjVRMfSrQ1qqwxQxKFjjTgFUD7BoWYR6iVe+mtxt9Zwf9teaj4AdccPu5tedX5A/VrzUR+sy/q1CwksF19VEfDj/cnQRW+qg66cfsXtrpx+xe2unH7F7a6cfsXtrpx+xe2unH7F7a6cfsXtoxx+xe2gAAOA1//8QAFBEBAAAAAAAAAAAAAAAAAAAAMP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAMP/aAAgBAwEBPwB//9k="
                    alt="Github Star">
            </a>
        </small>
    </p>
    
    <p>
        <small>
            <span id="busuanzi_container_site_pv">ğŸ‘<span id="busuanzi_value_site_pv"></span></span> &nbsp;
            <span id="busuanzi_container_page_pv">ğŸ“š<span id="busuanzi_value_page_pv"></span></span>
        </small>
    </p>
    
    

</footer>


<script>
    window.addEventListener('load', function () {
        globalAddScript('//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js');
    })
</script>

<!-- Baidu Tongji -->





    <script>
        // éæœ¬ç«™ç½‘å€ï¼Œæ–°å¼€tabé¡µç­¾
        (function () {
            var stopBubble = function (e) {
                e && e.stopPropagation && e.stopPropagation();
            }
            var links = document.querySelectorAll('a');
            [].slice.call(links).forEach(function (item) {
                if (item.href && item.href.indexOf(window.location.host) === -1) {
                    item.target = '_blank'
                }
                // é˜»æ­¢å†’æ³¡ï¼Œä¸è§¦å‘å½©è›‹ã€‚
                item.addEventListener('click', stopBubble, false);
            });
            var article = document.querySelector('article');
            article && article.addEventListener('click', stopBubble, false)
        })();
    </script>
    
<script>
    (function (window, document, undefined) {
        var hearts = [];
        var keywords = ["ç‚¹ä¸ªèµ", "ç•™ä¸ªè¨€", "èµèµä¸€ä¸‹", "åˆ†äº«ä¹‹", "blog.fenxiangz.com"];
        function randomInt(max) {
            return Math.floor(Math.random() * Math.floor(max));
        }
        window.addEventListener('click', createWord)

        function createWord(e) {
            var d = document.createElement("span");
            d.style.position = 'fixed';
            d.style.zIndex = 9999;
            d.style.color = 'rgb(' + [randomInt(255), randomInt(255), randomInt(255)].join(',') + ')';
            d.innerHTML = keywords[randomInt(keywords.length)];
            d.onselectstart = function () { return false; }

            hearts.push({ el: d, x: e.clientX - 5, y: e.clientY - 5, alpha: 1, scale: 1 });
            document.body.appendChild(d);
        }
        (function gameloop() {
            for (var i = 0; i < hearts.length; i++) {
                heart = hearts[i];
                if (heart.alpha <= 0) {
                    document.body.removeChild(heart.el);
                    hearts.splice(i, 1);
                    continue;
                }
                heart.y -= heart.alpha < 0.5 ? 2 : 1;
                heart.scale += 0.002;
                heart.alpha -= 0.013;
                heart.el.style.transform = 'scale(' + heart.scale + ')';
                heart.el.style.left = heart.x + 'px';
                heart.el.style.top = heart.y + 'px';
            }
            setTimeout(gameloop, 10)
        })();
    })(window, document);
</script>

</body>

</html>