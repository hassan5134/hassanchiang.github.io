<!DOCTYPE html>
<html lang="zh-CN">

<!-- Head tag -->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="referrer" content="no-referrer-when-downgrade">
  
  <meta name="baidu-site-verification" content="" />
  <meta name="google-site-verification" content="" />
  <meta name="msvalidate.01" content="" />
  <meta name="360-site-verification" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- if page has tags, then add tags to keyword -->
  
  
  <meta name="keywords" content=",">
  <!-- page.description has higher priority -->
  <meta name="description" content="Share everything">
  <link rel="shortcut icon" href="/favico.png">
  <title>
    
    é«˜æ€§èƒ½ MySQL - MySQLæ…¢æŸ¥è¯¢æ—¥å¿—æ€»ç»“ | åˆ†äº«ä¹‹
    
  </title>

  <link rel="canonical" href="/post/dateabase/mysql/2020-09-10_é«˜æ€§èƒ½MySQL_MySQLæ…¢æŸ¥è¯¢æ—¥å¿—æ€»ç»“.html">
  
<link rel="stylesheet" href="/css/reset.css">

  
<link rel="stylesheet" href="/css/layout.css">

  
<link rel="stylesheet" href="/css/markdown.css">

  <!-- Pygments Highlight CSS -->
  
<link rel="stylesheet" href="/css/highlight.css">

  
<link rel="stylesheet" href="/css/geektutu.css">

  <!-- global function -->
  <script>
    window.globalAddScript = function (url, onload, onerror) {
      var s = document.createElement('script');
      s.src = url;
      onload && (s.onload = onload);
      onerror && (s.onerror = onerror);
      document.body.appendChild(s);
    }
    window.globalAddCss = function (url) {
      var s = document.createElement('link');
      s.rel = 'stylesheet';
      s.href = url;
      document.body.appendChild(s);
    }
    window.getPosition = function (ele) {
      var x = 0, y = 0;
      while (ele) {
        x += (ele.offsetLeft - ele.scrollLeft + ele.clientLeft);
        y += (ele.offsetTop - ele.scrollTop + ele.clientTop);
        ele = ele.offsetParent;
      }
      return { x: x, y: y };
    }
    window.getDom = function (str) { return document.querySelector(str) }
  </script>
  <!-- google ad -->
  
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/feed.xml" title="åˆ†äº«ä¹‹" type="application/rss+xml">
</head>

<body>
    <header class="gkt-header col-xs-12 padding-0">
    <div id="gkt-nav" class="gkt-header-container">
        <a href="/" class="gkt-header-title float-left">
            <img class="float-left" src="/favico.png" alt="">
            <span>åˆ†äº«ä¹‹</span>
        </a>
        <nav class="gkt-header-nav text-right">
            <ul>
                <li><a class="hidden-xs" href="/feed.xml">è®¢é˜…</a></li>
                <li><a href="/series/">ä¸“é¢˜</a></li>
                <li><a href="/archives/">å½’æ¡£</a></li>
                <li><a href="/post/link.html">å‹é“¾</a></li>
                <li><a href="/post/about.html">å…³äº</a></li>
            </ul>
        </nav>
    </div>
    <div id="gkt-cate-nav" class="gkt-header-container hidden-xs">
        
        <nav class="gkt-header-nav float-left">
            <ul>
                
                
            </ul>
        </nav>
    </div>
</header>
<div class="gkt-header-placeholder" style="height: 44px"></div>
<div class="gkt-header-placeholder hidden-xs" style="height: 44px"></div>
<script>
    (function () {
        window.addEventListener('scroll', function () {
            if (window.innerWidth < 768) {
                return;
            }
            var nav = document.querySelector('#gkt-nav');
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            scrollTop > 50 && (nav.classList.add('hide'));
            scrollTop <= 50 && (nav.classList.remove('hide'));
        });
        var cateNavs = document.querySelectorAll('#gkt-cate-nav>nav>ul>li');
        [].slice.call(cateNavs).forEach(function (item) {
            var sub = item.querySelector('.gkt-sub-cate');
            if (!sub) return;
            item.addEventListener('mouseenter', function (e) { sub.style.display = 'block'; }, false);
            item.addEventListener('mouseleave', function (e) { sub.style.display = 'none'; }, false);
        })
    })();
</script>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Main Content -->
<main class="col-xs-12 padding-0 markdown-it">
    <!-- Post Container -->
    
    
    <!-- Post Content -->
<div class="float-left post-container box-shadow">
    <div class="u-arrow-wrapper hidden-xs">
        
        <a class="float-left" href="/post/dateabase/mysql/2020-09-09_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(1).html"><i class="u-arrow-left"></i></a>
        
        
        <a class="float-right" href="/post/dateabase/mysql/2020-09-11_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(2).html"><i class="u-arrow-right"></i></a>
        
    </div>
    <article class="col-xs-12">
        <h1> é«˜æ€§èƒ½ MySQL - MySQLæ…¢æŸ¥è¯¢æ—¥å¿—æ€»ç»“ </h1>
        
        
        
        <p>åŸæ–‡ï¼š<a target="_blank" rel="noopener" href="https://www.cnblogs.com/kerrycode/p/5593204.html">https://www.cnblogs.com/kerrycode/p/5593204.html</a></p>
<h2 id="æ…¢æŸ¥è¯¢æ—¥å¿—æ¦‚å¿µ"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—æ¦‚å¿µ" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—æ¦‚å¿µ"></a>æ…¢æŸ¥è¯¢æ—¥å¿—æ¦‚å¿µ</h2><pre><code> MySQLçš„æ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯MySQLæä¾›çš„ä¸€ç§æ—¥å¿—è®°å½•ï¼Œå®ƒç”¨æ¥è®°å½•åœ¨MySQLä¸­å“åº”æ—¶é—´è¶…è¿‡é˜€å€¼çš„è¯­å¥ï¼Œå…·ä½“æŒ‡è¿è¡Œæ—¶é—´è¶…è¿‡long_query_timeå€¼çš„SQLï¼Œåˆ™ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚long_query_timeçš„é»˜è®¤å€¼ä¸º10ï¼Œæ„æ€æ˜¯è¿è¡Œ10Sä»¥ä¸Šçš„è¯­å¥ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒMysqlæ•°æ®åº“å¹¶ä¸å¯åŠ¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥è®¾ç½®è¿™ä¸ªå‚æ•°ï¼Œå½“ç„¶ï¼Œå¦‚æœä¸æ˜¯è°ƒä¼˜éœ€è¦çš„è¯ï¼Œä¸€èˆ¬ä¸å»ºè®®å¯åŠ¨è¯¥å‚æ•°ï¼Œå› ä¸ºå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ä¼šæˆ–å¤šæˆ–å°‘å¸¦æ¥ä¸€å®šçš„æ€§èƒ½å½±å“ã€‚æ…¢æŸ¥è¯¢æ—¥å¿—æ”¯æŒå°†æ—¥å¿—è®°å½•å†™å…¥æ–‡ä»¶ï¼Œä¹Ÿæ”¯æŒå°†æ—¥å¿—è®°å½•å†™å…¥æ•°æ®åº“è¡¨ã€‚</code></pre>
<p>å®˜æ–¹æ–‡æ¡£ï¼Œå…³äºæ…¢æŸ¥è¯¢çš„æ—¥å¿—ä»‹ç»å¦‚ä¸‹ï¼ˆéƒ¨åˆ†èµ„æ–™ï¼Œå…·ä½“å‚è€ƒå®˜æ–¹ç›¸å…³é“¾æ¥ï¼‰ï¼š</p>
<p>The slow query log consists of SQL statements that took more than long_query_time seconds to execute and required at least min_examined_row_limit rows to be examined. The minimum and default values of long_query_time are 0 and 10, respectively. The value can be specified to a resolution of microseconds. For logging to a file, times are written including the microseconds part. For logging to tables, only integer times are written; the microseconds part is ignored.</p>
<p>By default, administrative statements are not logged, nor are queries that do not use indexes for lookups. This behavior can be changed usinglog_slow_admin_statements and log_queries_not_using_indexes, as described later.</p>
<h2 id="æ…¢æŸ¥è¯¢æ—¥å¿—ç›¸å…³å‚æ•°"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—ç›¸å…³å‚æ•°" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—ç›¸å…³å‚æ•°"></a>æ…¢æŸ¥è¯¢æ—¥å¿—ç›¸å…³å‚æ•°</h2><p>MySQL æ…¢æŸ¥è¯¢çš„ç›¸å…³å‚æ•°è§£é‡Šï¼š</p>
<p>slow_query_log    ï¼šæ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œ1è¡¨ç¤ºå¼€å¯ï¼Œ0è¡¨ç¤ºå…³é—­ã€‚</p>
<p>log-slow-queries  ï¼šæ—§ç‰ˆï¼ˆ5.6ä»¥ä¸‹ç‰ˆæœ¬ï¼‰MySQLæ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚å¯ä»¥ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œç³»ç»Ÿåˆ™ä¼šé»˜è®¤ç»™ä¸€ä¸ªç¼ºçœçš„æ–‡ä»¶host_name-slow.log</p>
<p>slow-query-log-fileï¼šæ–°ç‰ˆï¼ˆ5.6åŠä»¥ä¸Šç‰ˆæœ¬ï¼‰MySQLæ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—å­˜å‚¨è·¯å¾„ã€‚å¯ä»¥ä¸è®¾ç½®è¯¥å‚æ•°ï¼Œç³»ç»Ÿåˆ™ä¼šé»˜è®¤ç»™ä¸€ä¸ªç¼ºçœçš„æ–‡ä»¶host_name-slow.log</p>
<p>long_query_time ï¼šæ…¢æŸ¥è¯¢é˜ˆå€¼ï¼Œå½“æŸ¥è¯¢æ—¶é—´å¤šäºè®¾å®šçš„é˜ˆå€¼æ—¶ï¼Œè®°å½•æ—¥å¿—ã€‚</p>
<p>log_queries_not_using_indexesï¼šæœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ä¹Ÿè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚</p>
<p>log_outputï¼šæ—¥å¿—å­˜å‚¨æ–¹å¼ã€‚log_output=â€™FILEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯â€™FILEâ€™ã€‚log_output=â€™TABLEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ•°æ®åº“ï¼Œè¿™æ ·æ—¥å¿—ä¿¡æ¯å°±ä¼šè¢«å†™å…¥åˆ°mysql.slow_logè¡¨ä¸­ã€‚MySQLæ•°æ®åº“æ”¯æŒåŒæ—¶ä¸¤ç§æ—¥å¿—å­˜å‚¨æ–¹å¼ï¼Œé…ç½®çš„æ—¶å€™ä»¥é€—å·éš”å¼€å³å¯ï¼Œå¦‚ï¼šlog_output=â€™FILE,TABLEâ€™ã€‚æ—¥å¿—è®°å½•åˆ°ç³»ç»Ÿçš„ä¸“ç”¨æ—¥å¿—è¡¨ä¸­ï¼Œè¦æ¯”è®°å½•åˆ°æ–‡ä»¶è€—è´¹æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å¯¹äºéœ€è¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆéœ€è¦èƒ½å¤Ÿè·å¾—æ›´é«˜çš„ç³»ç»Ÿæ€§èƒ½ï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆè®°å½•åˆ°æ–‡ä»¶ã€‚</p>
<h2 id="æ…¢æŸ¥è¯¢æ—¥å¿—é…ç½®"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—é…ç½®" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—é…ç½®"></a>æ…¢æŸ¥è¯¢æ—¥å¿—é…ç½®</h2><p>é»˜è®¤æƒ…å†µä¸‹slow_query_logçš„å€¼ä¸ºOFFï¼Œè¡¨ç¤ºæ…¢æŸ¥è¯¢æ—¥å¿—æ˜¯ç¦ç”¨çš„ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®slow_query_logçš„å€¼æ¥å¼€å¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>mysql&gt; show variables  like &#39;%slow_query_log%&#39;;

+---------------------+-----------------------------------------------+

| Variable_name       | Value                                         |

+---------------------+-----------------------------------------------+

| slow_query_log      | OFF                                           |

| slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |

+---------------------+-----------------------------------------------+

2 rows in set (0.00 sec)



mysql&gt; set global slow_query_log=1;

Query OK, 0 rows affected (0.09 sec)



mysql&gt; show variables like &#39;%slow_query_log%&#39;;

+---------------------+-----------------------------------------------+

| Variable_name       | Value                                         |

+---------------------+-----------------------------------------------+

| slow_query_log      | ON                                            |

| slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |

+---------------------+-----------------------------------------------+

2 rows in set (0.00 sec)</code></pre>
<p>ä½¿ç”¨set global slow_query_log=1å¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åªå¯¹å½“å‰æ•°æ®åº“ç”Ÿæ•ˆï¼Œå¦‚æœMySQLé‡å¯ååˆ™ä¼šå¤±æ•ˆã€‚å¦‚æœè¦æ°¸ä¹…ç”Ÿæ•ˆï¼Œå°±å¿…é¡»ä¿®æ”¹é…ç½®æ–‡ä»¶my.cnfï¼ˆå…¶å®ƒç³»ç»Ÿå˜é‡ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚ä¾‹å¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code>mysql&gt; show variables like &#39;slow_query%&#39;;

+---------------------+-----------------------------------------------+

| Variable_name       | Value                                         |

+---------------------+-----------------------------------------------+

| slow_query_log      | OFF                                           |

| slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |

+---------------------+-----------------------------------------------+

2 rows in set (0.01 sec)</code></pre>
<p><img src="./2020-09-10_%E9%AB%98%E6%80%A7%E8%83%BDMySQL_MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%80%BB%E7%BB%93/1.png"></p>
<p>ä¿®æ”¹my.cnfæ–‡ä»¶ï¼Œå¢åŠ æˆ–ä¿®æ”¹å‚æ•°slow_query_log å’Œslow_query_log_fileåï¼Œç„¶åé‡å¯MySQLæœåŠ¡å™¨ï¼Œå¦‚ä¸‹æ‰€ç¤º</p>
<p>slow_query_log =1</p>
<p>slow_query_log_file=/tmp/mysql_slow.log</p>
<p><img src="./2020-09-10_%E9%AB%98%E6%80%A7%E8%83%BDMySQL_MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%80%BB%E7%BB%93/2.png"></p>
<pre><code>mysql&gt; show variables like &#39;slow_query%&#39;;

+---------------------+---------------------+

| Variable_name       | Value               |

+---------------------+---------------------+

| slow_query_log      | ON                  |

| slow_query_log_file | /tmp/mysql_slow.log |

+---------------------+---------------------+

2 rows in set (0.00 sec)</code></pre>
<p>å…³äºæ…¢æŸ¥è¯¢çš„å‚æ•°slow_query_log_file ï¼Œå®ƒæŒ‡å®šæ…¢æŸ¥è¯¢æ—¥å¿—æ–‡ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œç³»ç»Ÿé»˜è®¤ä¼šç»™ä¸€ä¸ªç¼ºçœçš„æ–‡ä»¶host_name-slow.logï¼ˆå¦‚æœæ²¡æœ‰æŒ‡å®šå‚æ•°slow_query_log_fileçš„è¯ï¼‰</p>
<pre><code>mysql&gt; show variables like &#39;slow_query_log_file&#39;;

+---------------------+-----------------------------------------------+

| Variable_name       | Value                                         |

+---------------------+-----------------------------------------------+

| slow_query_log_file | /home/WDPM/MysqlData/mysql/DB-Server-slow.log |

+---------------------+-----------------------------------------------+

1 row in set (0.00 sec)</code></pre>
<p>é‚£ä¹ˆå¼€å¯äº†æ…¢æŸ¥è¯¢æ—¥å¿—åï¼Œä»€ä¹ˆæ ·çš„SQLæ‰ä¼šè®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—é‡Œé¢å‘¢ï¼Ÿ è¿™ä¸ªæ˜¯ç”±å‚æ•°long_query_timeæ§åˆ¶ï¼Œé»˜è®¤æƒ…å†µä¸‹long_query_timeçš„å€¼ä¸º10ç§’ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥åœ¨my.cnfå‚æ•°é‡Œé¢ä¿®æ”¹ã€‚å…³äºè¿è¡Œæ—¶é—´æ­£å¥½ç­‰äºlong_query_timeçš„æƒ…å†µï¼Œå¹¶ä¸ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨mysqlæºç é‡Œæ˜¯åˆ¤æ–­å¤§äºlong_query_timeï¼Œè€Œéå¤§äºç­‰äºã€‚ä»MySQL 5.1å¼€å§‹ï¼Œlong_query_timeå¼€å§‹ä»¥å¾®ç§’è®°å½•SQLè¯­å¥è¿è¡Œæ—¶é—´ï¼Œä¹‹å‰ä»…ç”¨ç§’ä¸ºå•ä½è®°å½•ã€‚å¦‚æœè®°å½•åˆ°è¡¨é‡Œé¢ï¼Œåªä¼šè®°å½•æ•´æ•°éƒ¨åˆ†ï¼Œä¸ä¼šè®°å½•å¾®ç§’éƒ¨åˆ†ã€‚</p>
<pre><code>mysql&gt; show variables like &#39;long_query_time%&#39;;

+-----------------+-----------+

| Variable_name   | Value     |

+-----------------+-----------+

| long_query_time | 10.000000 |

+-----------------+-----------+

1 row in set (0.00 sec)



mysql&gt; set global long_query_time=4;

Query OK, 0 rows affected (0.00 sec)



mysql&gt; show variables like &#39;long_query_time&#39;;

+-----------------+-----------+

| Variable_name   | Value     |

+-----------------+-----------+

| long_query_time | 10.000000 |

+-----------------+-----------+

1 row in set (0.00 sec)</code></pre>
<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä¿®æ”¹äº†å˜é‡long_query_timeï¼Œä½†æ˜¯æŸ¥è¯¢å˜é‡long_query_timeçš„å€¼è¿˜æ˜¯10ï¼Œéš¾é“æ²¡æœ‰ä¿®æ”¹åˆ°å‘¢ï¼Ÿæ³¨æ„ï¼šä½¿ç”¨å‘½ä»¤ set global long_query_time=4ä¿®æ”¹åï¼Œéœ€è¦é‡æ–°è¿æ¥æˆ–æ–°å¼€ä¸€ä¸ªä¼šè¯æ‰èƒ½çœ‹åˆ°ä¿®æ”¹å€¼ã€‚ä½ ç”¨show variables like â€˜long_query_timeâ€™æŸ¥çœ‹æ˜¯å½“å‰ä¼šè¯çš„å˜é‡å€¼ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ç”¨é‡æ–°è¿æ¥ä¼šè¯ï¼Œè€Œæ˜¯ç”¨show global variables like â€˜long_query_timeâ€™; å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="./2020-09-10_%E9%AB%98%E6%80%A7%E8%83%BDMySQL_MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%80%BB%E7%BB%93/3.png"></p>
<p>åœ¨MySQLé‡Œé¢æ‰§è¡Œä¸‹é¢SQLè¯­å¥ï¼Œç„¶åæˆ‘ä»¬å»æ£€æŸ¥å¯¹åº”çš„æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œå°±ä¼šå‘ç°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ä¿¡æ¯ã€‚</p>
<pre><code>mysql&gt; select sleep(3);

+----------+

| sleep(3) |

+----------+

|        0 |

+----------+

1 row in set (3.00 sec)



[root@DB-Server ~]# more /tmp/mysql_slow.log

/usr/sbin/mysqld, Version: 5.6.20-enterprise-commercial-advanced-log (MySQL Enterprise Server - Advanced Edition (Commercial)). started with:

Tcp port: 0  Unix socket: (null)

Time                 Id Command    Argument

/usr/sbin/mysqld, Version: 5.6.20-enterprise-commercial-advanced-log (MySQL Enterprise Server - Advanced Edition (Commercial)). started with:

Tcp port: 0  Unix socket: (null)

Time                 Id Command    Argument

# Time: 160616 17:24:35

# User@Host: root[root] @ localhost []  Id:     5

# Query_time: 3.002615  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 0

SET timestamp=1466069075;

select sleep(3);</code></pre>
<p><img src="./2020-09-10_%E9%AB%98%E6%80%A7%E8%83%BDMySQL_MySQL%E6%85%A2%E6%9F%A5%E8%AF%A2%E6%97%A5%E5%BF%97%E6%80%BB%E7%BB%93/4.png"></p>
<p>log_output å‚æ•°æ˜¯æŒ‡å®šæ—¥å¿—çš„å­˜å‚¨æ–¹å¼ã€‚log_output=â€™FILEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ–‡ä»¶ï¼Œé»˜è®¤å€¼æ˜¯â€™FILEâ€™ã€‚log_output=â€™TABLEâ€™è¡¨ç¤ºå°†æ—¥å¿—å­˜å…¥æ•°æ®åº“ï¼Œè¿™æ ·æ—¥å¿—ä¿¡æ¯å°±ä¼šè¢«å†™å…¥åˆ°mysql.slow_logè¡¨ä¸­ã€‚MySQLæ•°æ®åº“æ”¯æŒåŒæ—¶ä¸¤ç§æ—¥å¿—å­˜å‚¨æ–¹å¼ï¼Œé…ç½®çš„æ—¶å€™ä»¥é€—å·éš”å¼€å³å¯ï¼Œå¦‚ï¼šlog_output=â€™FILE,TABLEâ€™ã€‚æ—¥å¿—è®°å½•åˆ°ç³»ç»Ÿçš„ä¸“ç”¨æ—¥å¿—è¡¨ä¸­ï¼Œè¦æ¯”è®°å½•åˆ°æ–‡ä»¶è€—è´¹æ›´å¤šçš„ç³»ç»Ÿèµ„æºï¼Œå› æ­¤å¯¹äºéœ€è¦å¯ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œåˆéœ€è¦èƒ½å¤Ÿè·å¾—æ›´é«˜çš„ç³»ç»Ÿæ€§èƒ½ï¼Œé‚£ä¹ˆå»ºè®®ä¼˜å…ˆè®°å½•åˆ°æ–‡ä»¶ã€‚</p>
<pre><code>mysql&gt; show variables like &#39;%log_output%&#39;;

+---------------+-------+

| Variable_name | Value |

+---------------+-------+

| log_output    | FILE  |

+---------------+-------+

1 row in set (0.00 sec)



mysql&gt; set global log_output=&#39;TABLE&#39;;

Query OK, 0 rows affected (0.00 sec)


mysql&gt; show variables like &#39;%log_output%&#39;;

+---------------+-------+

| Variable_name | Value |

+---------------+-------+

| log_output    | TABLE |

+---------------+-------+

1 row in set (0.00 sec)



mysql&gt; select sleep(5) ;

+----------+

| sleep(5) |

+----------+

|        0 |

+----------+

1 row in set (5.00 sec)



mysql&gt; 



mysql&gt; select * from mysql.slow_log;

+---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+

| start_time          | user_host                 | query_time | lock_time | rows_sent | rows_examined | db | last_insert_id | insert_id | server_id | sql_text        | thread_id |

+---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+

| 2016-06-16 17:37:53 | root[root] @ localhost [] | 00:00:03   | 00:00:00  |         1 |             0 |    |              0 |         0 |         1 | select sleep(3) |         5 |

| 2016-06-16 21:45:23 | root[root] @ localhost [] | 00:00:05   | 00:00:00  |         1 |             0 |    |              0 |         0 |         1 | select sleep(5) |         2 |

+---------------------+---------------------------+------------+-----------+-----------+---------------+----+----------------+-----------+-----------+-----------------+-----------+

2 rows in set (0.00 sec)



mysql&gt; </code></pre>
<p>ç³»ç»Ÿå˜é‡log-queries-not-using-indexesï¼šæœªä½¿ç”¨ç´¢å¼•çš„æŸ¥è¯¢ä¹Ÿè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼ˆå¯é€‰é¡¹ï¼‰ã€‚å¦‚æœè°ƒä¼˜çš„è¯ï¼Œå»ºè®®å¼€å¯è¿™ä¸ªé€‰é¡¹ã€‚å¦å¤–ï¼Œå¼€å¯äº†è¿™ä¸ªå‚æ•°ï¼Œå…¶å®ä½¿ç”¨full index scançš„sqlä¹Ÿä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ã€‚</p>
<p>This option does not necessarily mean that no index is used. For example, a query that uses a full index scan uses an index but would be logged because the index would not limit the number of rows.</p>
<pre><code>mysql&gt; show variables like &#39;log_queries_not_using_indexes&#39;;

+-------------------------------+-------+

| Variable_name                 | Value |

+-------------------------------+-------+

| log_queries_not_using_indexes | OFF   |

+-------------------------------+-------+

1 row in set (0.00 sec)



mysql&gt; set global log_queries_not_using_indexes=1;

Query OK, 0 rows affected (0.00 sec)



mysql&gt; show variables like &#39;log_queries_not_using_indexes&#39;;

+-------------------------------+-------+

| Variable_name                 | Value |

+-------------------------------+-------+

| log_queries_not_using_indexes | ON    |

+-------------------------------+-------+

1 row in set (0.00 sec)</code></pre>
<p>ç³»ç»Ÿå˜é‡log_slow_admin_statementsè¡¨ç¤ºæ˜¯å¦å°†æ…¢ç®¡ç†è¯­å¥ä¾‹å¦‚ANALYZE TABLEå’ŒALTER TABLEç­‰è®°å…¥æ…¢æŸ¥è¯¢æ—¥å¿—</p>
<pre><code>mysql&gt; show variables like &#39;log_slow_admin_statements&#39;;

+---------------------------+-------+

| Variable_name             | Value |

+---------------------------+-------+

| log_slow_admin_statements | OFF   |

+---------------------------+-------+

1 row in set (0.00 sec)



mysql&gt; </code></pre>
<p>ç³»ç»Ÿå˜é‡log_slow_slave_statements è¡¨ç¤º</p>
<p>By default, a replication slave does not write replicated queries to the slow query log. To change this, use thelog_slow_slave_statements system variable.</p>
<p>When the slow query log is enabled, this variable enables logging for queries that have taken more than long_query_time seconds to execute on the slave. This variable was added in MySQL 5.7.1. Setting this variable has no immediate effect. The state of the variable applies on all subsequent START SLAVE statements.</p>
<p>å‚æ•°â€“log-short-format </p>
<p>The server writes less information to the slow query log if you use the â€“log-short-format option.<br>H2M_LI_HEADER<br><strong>Command-Line Format</strong><code>--log-short-format</code><strong>Permitted Values**</strong>Type**<code>boolean</code><strong>Default</strong><code>FALSE</code></p>
<p>å¦å¤–ï¼Œå¦‚æœä½ æƒ³æŸ¥è¯¢æœ‰å¤šå°‘æ¡æ…¢æŸ¥è¯¢è®°å½•ï¼Œå¯ä»¥ä½¿ç”¨ç³»ç»Ÿå˜é‡ã€‚</p>
<pre><code>mysql&gt; show global status like &#39;%Slow_queries%&#39;;

+---------------+-------+

| Variable_name | Value |

+---------------+-------+

| Slow_queries  | 2104  |

+---------------+-------+

1 row in set (0.00 sec)



mysql&gt; </code></pre>
<p>æ—¥å¿—åˆ†æå·¥å…·mysqldumpslow</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœè¦æ‰‹å·¥åˆ†ææ—¥å¿—ï¼ŒæŸ¥æ‰¾ã€åˆ†æSQLï¼Œæ˜¾ç„¶æ˜¯ä¸ªä½“åŠ›æ´»ï¼ŒMySQLæä¾›äº†æ—¥å¿—åˆ†æå·¥å…·mysqldumpslow</p>
<p>æŸ¥çœ‹mysqldumpslowçš„å¸®åŠ©ä¿¡æ¯ï¼š</p>
<pre><code>[root@DB-Server ~]# mysqldumpslow --help

Usage: mysqldumpslow [ OPTS... ] [ LOGS... ]



Parse and summarize the MySQL slow query log. Options are



  --verbose    verbose

  --debug      debug

  --help       write this text to standard output



  -v           verbose

  -d           debug

  -s ORDER     what to sort by (al, at, ar, c, l, r, t), &#39;at&#39; is default

                al: average lock time

                ar: average rows sent

                at: average query time

                 c: count

                 l: lock time

                 r: rows sent

                 t: query time  

  -r           reverse the sort order (largest last instead of first)

  -t NUM       just show the top n queries

  -a           don&#39;t abstract all numbers to N and strings to &#39;S&#39;

  -n NUM       abstract numbers with at least n digits within names

  -g PATTERN   grep: only consider stmts that include this string

  -h HOSTNAME  hostname of db server for *-slow.log filename (can be wildcard),

               default is &#39;*&#39;, i.e. match all

  -i NAME      name of server instance (if using mysql.server startup script)

  -l           don&#39;t subtract lock time from total time</code></pre>
<p>-s, æ˜¯è¡¨ç¤ºæŒ‰ç…§ä½•ç§æ–¹å¼æ’åºï¼Œ</p>
<blockquote>
<p>c : è®¿é—®è®¡æ•°</p>
<p>l : é”å®šæ—¶é—´</p>
<p>r : è¿”å›è®°å½•</p>
<p>t : æŸ¥è¯¢æ—¶é—´</p>
<p>al : å¹³å‡é”å®šæ—¶é—´</p>
<p>ar : å¹³å‡è¿”å›è®°å½•æ•°</p>
<p>at : å¹³å‡æŸ¥è¯¢æ—¶é—´</p>
</blockquote>
<p>-t, æ˜¯top nçš„æ„æ€ï¼Œå³ä¸ºè¿”å›å‰é¢å¤šå°‘æ¡çš„æ•°æ®ï¼›</p>
<p>-g, åè¾¹å¯ä»¥å†™ä¸€ä¸ªæ­£åˆ™åŒ¹é…æ¨¡å¼ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„ï¼›</p>
<p>æ¯”å¦‚</p>
<p>å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQLã€‚</p>
<p>mysqldumpslow -s r -t 10 /database/mysql/mysql06_slow.log</p>
<p>å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL</p>
<p>mysqldumpslow -s c -t 10 /database/mysql/mysql06_slow.log</p>
<p>å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥ã€‚</p>
<p>mysqldumpslow -s t -t 10 -g â€œleft joinâ€ /database/mysql/mysql06_slow.log</p>
<p>å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°åˆ·å±çš„æƒ…å†µã€‚</p>
<p>mysqldumpslow -s r -t 20 /mysqldata/mysql/mysql06-slow.log | more</p>
<p><strong>å‚è€ƒèµ„æ–™ï¼š</strong></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html">https://dev.mysql.com/doc/refman/5.7/en/slow-query-log.html</a></p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_long_query_time">https://dev.mysql.com/doc/refman/5.7/en/server-system-variables.html#sysvar_long_query_time</a></p>
<p>ä½œè€…ï¼š<a target="_blank" rel="noopener" href="http://www.cnblogs.com/kerrycode/">æ½‡æ¹˜éšè€…</a></p>
<p>å‡ºå¤„ï¼š<a target="_blank" rel="noopener" href="http://www.cnblogs.com/kerrycode/">http://www.cnblogs.com/kerrycode/</a></p>

        
<script src="/js/qrious.min.js"></script>


        <hr>
        <div>
            
            <p>
                <span>æœ¬æ–‡å‘è¡¨äº 2020-09-10ï¼Œæœ€åä¿®æ”¹äº 2020-11-29ã€‚</span>
            </p>
            <!-- æ–‡ç« æœ«å°¾çš„æç¤º start -->
            
            
            
                
            <!-- æ–‡ç« æœ«å°¾çš„æç¤º end -->
        </div>
        <hr />
        <p name="pagination" style="font-size: 1.2em">
    
    <a class="float-left" href="/post/dateabase/mysql/2020-09-09_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(1).html">ä¸Šä¸€ç¯‡ Â« é«˜æ€§èƒ½ MySQL é˜…è¯»ç¬”è®° (1)</a>
    
    
    <a class="float-right" href="/post/dateabase/mysql/2020-09-11_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(2).html">ä¸‹ä¸€ç¯‡ Â» é«˜æ€§èƒ½ MySQL é˜…è¯»ç¬”è®° (2)</a>
    
</p>
    </article>
    <!-- èµèµ -->
    <!--æ‰“èµ-->

    <!-- æ¨èé˜…è¯»ä¸‰ç¯‡æ–‡ç«  -->
    <div class="col-xs-12">
        <h3>æ¨èé˜…è¯»</h3>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/images/java/netty-logo.png')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/java/netty/2019-03-26_åŸºäºNettyè‡ªå·±åŠ¨æ‰‹å®ç°RPCæ¡†æ¶.html" class="title">
                åŸºäºNettyè‡ªå·±åŠ¨æ‰‹å®ç°RPCæ¡†æ¶
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2019-03-26ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡25240å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦85åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/images/linux.png')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/linux/2018-11-17_UbuntuåŒ…é”™è¯¯æˆ–ä¸ä¸€è‡´æ—¶çš„æ¸…ç†æ–¹å¼.html" class="title">
                Ubuntu åŒ…é”™è¯¯æˆ–ä¸ä¸€è‡´æ—¶çš„æ¸…ç†æ–¹å¼
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2018-11-17ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡767å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦3åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
        <div class="post-preview">
    <div class="post-img" style="background-image: url('/images/computer-networking.png')"></div>
    <div class="post-info">
        <div class="post-info-center">
            <div class="hidden-xs">
                
                
            </div>
            <a href="/post/network/2017-12-05_ä¸ºä»€ä¹ˆTCPå’ŒUDPçš„ç«¯å£å·å¯ä»¥é‡å¤.html" class="title">
                2017-12-05_ä¸ºä»€ä¹ˆtcp/udpçš„ç«¯å£å·å¯ä»¥é‡å¤.md
            </a>
            <p class="text-gray">
                <small>
                    <span>å‘è¡¨äº2017-12-05ï¼Œ</span>
                    <span class="hidden-xs">å…¨æ–‡314å­—ï¼Œ</span>
                    <span>é˜…è¯»çº¦2åˆ†é’Ÿ</span>
                </small>
            </p>
        </div>
    </div>
</div>
        
    </div>
    <div class="col-xs-12">
        <!-- æ ‡ç­¾åˆ—è¡¨ -->
        <!-- Featured Tags -->
<style>
    #featured-tag .post-tag-item {
        font-size: 12px;
        line-height: 30px;
        display: inline-block;
        height: 30px;
        margin: 5px 0px;
        padding: 0 7px;
        color: #333;
        border-radius: 15px;
        background: #f6f6f6;
    }

    #featured-tag .post-tag-item:hover {
        color: #337ab7;
    }
</style>
<div id="featured-tag">
    
</div>
    </div>
    <!-- è¯„è®º -->
    
    <div class="col-xs-12">
        
<div class="col-xs-12 padding-0">
    <div id="gitalk-container">
        <div class="gt-container text-center" style="margin-top: 50px;">
            <button class="gt-btn gt-btn-public"><span class="gt-btn-text">å» Github è¯„è®º</span></button>
        </div>
    </div>
    <div id="gitalk-related"></div>
</div>

<link rel="stylesheet" href="/css/gitalk.css">


<script src="/js/gitalk.min.js"></script>

<script>
    window.addEventListener('load', function () {
        function renderCommentUrl(data) {
            var url = (data[window.location.pathname] || {}).url
            url && getDom('#gitalk-container button').addEventListener('click', function (e) { window.open(url)})
            url || (getDom('#gitalk-container').style.display = 'none')
        }
        const gitalk = new Gitalk({
            clientID: 'a33ab8f0fc90bd0b86d7',
            clientSecret: '8dfa9e4100d0b59b5319450b32b8752298e3aafc',
            accessToken: '',
            repo: 'blogcmt',
            owner: 'HassanChiang',
            admin: ['HassanChiang'],
            id: window.location.pathname,
            distractionFreeMode: false
        });
        fetch("https://api.github.com/user").then(function(resp){
            gitalk.render('gitalk-container');
        }).catch(function(e){
            fetch('/tool/issues.json').then(function (r) { return r.json() }).then(renderCommentUrl).catch(function (e) { })
        })
        getDom('#gitalk-container').addEventListener('click', function (e) {
            e && e.stopPropagation && e.stopPropagation();
        });
    })
</script>
<script>
    window.addEventListener('load', function () {
        function render(comments) {
            var template = '<a href="${comment.url}?utm_source=gitalk" class="dis-item-url"><h3 class="dis-item-title">${comment.title}</h3>' +
                '<p class="dis-item-des">${comment.count} è¯„è®º â— ${comment.date}</p>' +
                '<div class="dis-item-content"><img class="dis-item-img" src="${comment.icon}" alt="icon"><p><b><span class="dis-item-user">${comment.user}</span></b>&nbsp;â€”â€”&nbsp;${comment.body}</p></div>' +
                '</a>'

            var wrapper = getDom('#gitalk-related');
            comments = shuffle(comments);
            comments.slice(0, 4).forEach(function (c) {
                var div = document.createElement('div');
                div.classList.add('dis-item');
                div.innerHTML = template.replace("${comment.url}", c.url)
                    .replace("${comment.title}", c.title)
                    .replace("${comment.count}", c.count)
                    .replace("${comment.date}", c.date)
                    .replace("${comment.icon}", c.icon)
                    .replace("${comment.user}", c.user)
                    .replace("${comment.body}", c.body)
                wrapper.appendChild(div)
            })
            var p = document.createElement('p')
            p.innerHTML = '<a target="_blank" rel="noopener" href="https://geektutu.com/post/blog-experience-7.html">Gitalk Plus</a>';
            p.classList.add('dis-divide');
            wrapper.appendChild(p);
            wrapper.classList.add('dis-wrapper')
        }
        function shuffle(a) {
            for (var i = a.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                [a[i], a[j]] = [a[j], a[i]];
            }
            return a;
        }
        fetch('/tool/comments.json').then(function (r) { return r.json() }).then(render).catch(function (e) { })
    })
</script>

    </div>
    
</div>
<aside class="float-left gkt-sidebar hidden-xs hidden-sm">
    <div style="clear: both"></div>
    <div class="gkt-sidebar-wrapper">
        <section class="box-shadow"><style>
    .gkt-summary {
        border: 1px solid #DDDDDD;
        border-radius: 3px;
        padding: 5px;
        width: 100%;
    }


    .gkt-summary nav {
        overflow: hidden;
    }

    .gkt-summary nav a {
        display: inline-block;
        text-align: center;
        color: #333;
        font-size: 12px;
    }

    .gkt-summary nav span {
        display: block;
    }

    .gkt-summary nav .middle {
        border-left: 1px solid #eaecef;
        border-right: 1px solid #eaecef;
    }

    .gkt-summary .number {
        font-weight: bold;
    }

    .gkt-summary .link-list {
        margin-top: 5px;
        margin-bottom: -5px;
        padding-top: 7px;
        border-top: 1px dashed #999;
        display: flex;
    }

    .gkt-summary .link-list a {
        flex: 1;
    }

    .gkt-summary .link-list img {
        width: 25px;
        height: 25px;
    }
</style>

<div class="gkt-summary">
    <nav>
        <a href="/" class="col-xs-4">
            <span class="number">114</span><span>æ–‡ç« </span>
        </a>
        <a href="/series" class="col-xs-4 middle">
            <span class="number">0</span><span>ä¸“é¢˜</span>
        </a>
        <a href="/tags" class="col-xs-4">
            <span class="number">0</span><span>æ ‡ç­¾</span>
        </a>
    </nav>

    
</div></section>
        
        
        
        <section class="gkt-sidebar-content box-shadow">
            <strong>æœ€è¿‘çš„æ–‡ç« </strong>
            <ul>
                
                <li>
                    <a href="/post/linux/2020-12-16_åŸæ¥8å¼ å›¾ï¼Œå°±å¯ä»¥ææ‡‚ã€Œé›¶æ‹·è´ã€äº†.html">åŸæ¥ 8 å¼ å›¾ï¼Œå°±å¯ä»¥ææ‡‚ã€Œé›¶æ‹·è´ã€äº†</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/Redis/2020_12_08_Redisæ¸…ç†æ–¹æ³•.html">Rediså­˜å‚¨ä¼˜åŒ–</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-28_çŒ´å­ç®¡ç†æ³•åˆ™.html">çŒ´å­ç®¡ç†æ³•åˆ™</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-27_ã€è®¤çŸ¥å‡çº§ã€æ˜¯æ¯”å…¶ä»–ä¸€åˆ‡éƒ½æ›´åŠ é‡è¦çš„æ€ç»´æ¨¡å‹è½¬å˜.html">ã€è®¤çŸ¥å‡çº§ã€æ˜¯æ¯”å…¶ä»–ä¸€åˆ‡éƒ½æ›´åŠ é‡è¦çš„æ€ç»´æ¨¡å‹è½¬å˜</a>
                </li>
                
                <li>
                    <a href="/post/util/2020-11-26_å¼€å‘èµ„æºæ•´ç†.html">å¼€å‘èµ„æºå¯¼èˆª</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-11-26_Jiraä¿®æ”¹Pathè·¯å¾„åçš„ç”¨æˆ·ç®¡ç†é—®é¢˜.html">Jira ä¿®æ”¹ Path è·¯å¾„åçš„ç”¨æˆ·ç®¡ç†é—®é¢˜</a>
                </li>
                
                <li>
                    <a href="/post/å…¶ä»–/2020-10-25_V2rayé…ç½®.html">V2ray é…ç½®</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-13_MySQLä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨å†…éƒ¨ä¸´æ—¶è¡¨.html">MySQLä»€ä¹ˆæ—¶å€™ä¼šä½¿ç”¨å†…éƒ¨ä¸´æ—¶è¡¨?</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-12_MySQLä¸­çš„Character_Setä¸Collation.html">MySQL ä¸­çš„ Character Set ä¸ Collation</a>
                </li>
                
                <li>
                    <a href="/post/dateabase/mysql/2020-09-11_é«˜æ€§èƒ½MySQLé˜…è¯»ç¬”è®°(2).html">é«˜æ€§èƒ½ MySQL é˜…è¯»ç¬”è®° (2)</a>
                </li>
                
            </ul>
        </section>
        
    </div>
</aside>

<script>
    (function () {
        function resizeUArrow() {
            var s = getDom('.u-arrow-wrapper').style
            var pc = getDom('.post-container')
            s.left = getPosition(pc).x + 'px';
            s.width = pc.clientWidth + 'px';
        }
        resizeUArrow()
        window.addEventListener('resize', resizeUArrow);
    })();
</script>

    

<script>
    (function () {
        var ele = getDom('.gkt-sidebar-content')
        if(!ele) return;
        var wrapper = getDom('.gkt-sidebar-wrapper')
        var last = 0
        ele.style.maxHeight = ((window.innerHeight || 798) - 200) + 'px'
        var f = function (e) {
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            var isDown = scrollTop > last;
            var pos = getPosition(ele).y - scrollTop;
            var downLimit = 50;
            var upLimit = -100;
            // uarrow.style.marginTop = scrollTop + 'px';
            isDown && pos <= downLimit && wrapper.classList.add("gkt-sidebar-fixed");
            !isDown && pos > upLimit && wrapper.classList.remove("gkt-sidebar-fixed");
            last = scrollTop
        }
        f()
        window.addEventListener("scroll", f)
    })();
</script>

</main>
    </div>
    <style>
    img#go-top {
        position: fixed;
        bottom: 100px;
        width: 50px;
        cursor: pointer;
        z-index: 9999;
    }
</style>
<img id="go-top" src="/icon/top.png" class="hidden-xs" style="display: none" />
<script>
    (function () {
        var goTop = document.getElementById('go-top');
        var mainContainer = document.querySelector('.main-container');
        
        goTop.addEventListener('click', function () {
            window.scroll(0, 0);
        }, false);
        window.addEventListener('scroll', function () {
            var right = document.body.offsetWidth - mainContainer.getBoundingClientRect().right;
            var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            goTop.style.right = right + 10 + 'px'
            scrollTop > 700 && (goTop.style.display = "block");
            scrollTop <= 700 && (goTop.style.display = "none");
        });
    })();
</script>
    <style>
    #geektutu-click-img-container {
        position: fixed;
        left: 0;
        top: 0;
        text-align: center;
        width: 100%;
        display: none;
        z-index: 9999;
    }

    #geektutu-click-img-container img {
        object-fit: contain;
        background: #eaecef;
        padding: 15px;
        border-radius: 10px;
        height: auto;
        width: auto;
        vertical-align: middle;
    }
</style>


<div id="geektutu-click-img-container">
    <img src="" alt="Big Image">
</div>

<script>
    (function () {
        var container = document.querySelector('#geektutu-click-img-container')
        var targetImg = container.querySelector('img')
        var imgs = document.querySelectorAll('article img');
        targetImg.addEventListener('click', function (e) {
            container.style.display = 'none';
            e && e.stopPropagation && e.stopPropagation();
        }, false);

        for (var i = 0; i < imgs.length; ++i) {
            var img = imgs[i];
            img.addEventListener('click', (function (src, rate) {
                return function (e) {
                    e && e.stopPropagation && e.stopPropagation();
                    if (window.innerWidth < 980) {
                        return
                    }
                    targetImg.style.height = targetImg.style.width = 'auto';
                    if (window.innerWidth / window.innerHeight > rate) {
                        targetImg.style.height = (window.innerHeight - 20) + 'px';
                    } else {
                        targetImg.style.width = (window.innerWidth - 20) + 'px';
                    }
                    container.style.height = window.innerHeight + 'px'
                    container.style.lineHeight = window.innerHeight + 'px'
                    container.style.display = 'block';
                    targetImg.src = src;
                };
            }(img.src, img.width / img.height)), false)
        }
    })();
</script>
    <!-- Footer -->
    <!-- Footer -->
<style>
    footer {
        width: 100%;
        line-height: 1.5;
        padding: 20px;
    }

    footer a {
        color: #333;
        text-decoration: none;
    }

    .footer-hexo img {
        height: 20px;
        margin-bottom: -5px;
    }

    .footer-hexo a {
        color: #337ab7;
    }
</style>
<footer class="text-center col-xs-12">
    <p>
        <small>Â© 2020 - Hassan - </small>
        <small>
            <a target="_blank" rel="nofollow noopener" href="http://beian.miit.gov.cn/"></a>
        </small>
    </p>
    <p class="footer-hexo">
        <!-- ä½†è‹¥ç›´æ¥ä½¿ç”¨æˆ–ä¿®æ”¹ä¸»é¢˜ï¼Œè¯·åŠ¡å¿…ä¿ç•™è¿™æ®µå£°æ˜ -->
        <small>Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme
            <a target="_blank" href="https://geektutu.com">Geektutu</a>
            <a target="_blank" rel="noopener" href="https://github.com/geektutu/hexo-theme-geektutu">
                <img src="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAYGBgYHBgcICAcKCwoLCg8ODAwODxYQERAREBYiFRkVFRkVIh4kHhweJB42KiYmKjY+NDI0PkxERExfWl98fKcBBgYGBgcGBwgIBwoLCgsKDw4MDA4PFhAREBEQFiIVGRUVGRUiHiQeHB4kHjYqJiYqNj40MjQ+TERETF9aX3x8p//CABEIACIAUAMBIgACEQEDEQH/xAAcAAABBAMBAAAAAAAAAAAAAAAAAQQFBwIDBgj/2gAIAQEAAAAA9KrHSgAYL5/z6zZGuJd12uugbhq3uKtmuRtix20IS7lTLAfAAAn/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAAAB/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAgBAxAAAAAAAf/EADEQAAICAQIEBQEGBwAAAAAAAAECAwQFAAYREhORBxQhUlQxQVFic5KxJDJCYYGC0f/aAAgBAQABPwCFHnjWUzuvN6hV4cANSRLGjO9yRVUcSzMoA7jVXJYe5N0a2dhmk9kc0bN2GvLN8mbuNeWb5M3ca8s3yZu415Y/Jm7jXlm+TN3H/NeVPyZu40vOk3TZywK8wJ+v3EHVM/wsI/Dq2lrxN3Nnca16eti8chSAIoMbzByhMwP14kHVfwIiSaF5c96J6kwwCOTnHsYk8uvCrdmQy1TI4rJuz3cZLyGR/wCd4+YoOf8AEpUjXitubLYPG4paFsUxcuiGe7yc5gTW3LW44szXmobsi3Dhmic2+Z4+vCVH9CpraPiQ+QvbgTJrPFBWd5YpWrmNIIEXiRO32Pqt4p7cnfHk18lFBdmEVW1LVdIZGOrniTt6plrWKaO69yCykDRxwF+LMAewB0Txtr+Sf31VI8tEPw62fZt7N3Humtbpzz13ucX6CGSWMSuzpLyD1eNgeUka3PuvHbaxq3biTMHfkiSNCS78CwU+3Xg7Vu3MhuTcU6cq3Zemn3Eh2dv8Lzcut+29x1atKbHYqLJUhLwyNMwiZ3j9yDWOxUOV3tgb+3No5LDx1pi9+aeIwRlNY6bc+Jv+IFGrhLxtXJZ7VKcw81diiAAEn0JOrkWZyNfbEr0tz27UGQgkuGzXdIIvyowq99bRxk9ffO/L81SZBPZgEEroQroIxxMZOgeNsfkn99QypHGqO4Vl9CDrN4LDZkwyzyyQ2IgRHZrzGCZVP1XnQglT9oOtw4LC7iqV6uRkZoYpxKFSQpzFRw4EjVRMfSrQ1qqwxQxKFjjTgFUD7BoWYR6iVe+mtxt9Zwf9teaj4AdccPu5tedX5A/VrzUR+sy/q1CwksF19VEfDj/cnQRW+qg66cfsXtrpx+xe2unH7F7a6cfsXtrpx+xe2unH7F7a6cfsXtoxx+xe2gAAOA1//8QAFBEBAAAAAAAAAAAAAAAAAAAAMP/aAAgBAgEBPwB//8QAFBEBAAAAAAAAAAAAAAAAAAAAMP/aAAgBAwEBPwB//9k="
                    alt="Github Star">
            </a>
        </small>
    </p>
    
    <p>
        <small>
            <span id="busuanzi_container_site_pv">ğŸ‘<span id="busuanzi_value_site_pv"></span></span> &nbsp;
            <span id="busuanzi_container_page_pv">ğŸ“š<span id="busuanzi_value_page_pv"></span></span>
        </small>
    </p>
    
    

</footer>


<script>
    window.addEventListener('load', function () {
        globalAddScript('//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js');
    })
</script>

<!-- Baidu Tongji -->





    <script>
        // éæœ¬ç«™ç½‘å€ï¼Œæ–°å¼€tabé¡µç­¾
        (function () {
            var stopBubble = function (e) {
                e && e.stopPropagation && e.stopPropagation();
            }
            var links = document.querySelectorAll('a');
            [].slice.call(links).forEach(function (item) {
                if (item.href && item.href.indexOf(window.location.host) === -1) {
                    item.target = '_blank'
                }
                // é˜»æ­¢å†’æ³¡ï¼Œä¸è§¦å‘å½©è›‹ã€‚
                item.addEventListener('click', stopBubble, false);
            });
            var article = document.querySelector('article');
            article && article.addEventListener('click', stopBubble, false)
        })();
    </script>
    
<script>
    (function (window, document, undefined) {
        var hearts = [];
        var keywords = ["ç‚¹ä¸ªèµ", "ç•™ä¸ªè¨€", "èµèµä¸€ä¸‹", "åˆ†äº«ä¹‹", "blog.fenxiangz.com"];
        function randomInt(max) {
            return Math.floor(Math.random() * Math.floor(max));
        }
        window.addEventListener('click', createWord)

        function createWord(e) {
            var d = document.createElement("span");
            d.style.position = 'fixed';
            d.style.zIndex = 9999;
            d.style.color = 'rgb(' + [randomInt(255), randomInt(255), randomInt(255)].join(',') + ')';
            d.innerHTML = keywords[randomInt(keywords.length)];
            d.onselectstart = function () { return false; }

            hearts.push({ el: d, x: e.clientX - 5, y: e.clientY - 5, alpha: 1, scale: 1 });
            document.body.appendChild(d);
        }
        (function gameloop() {
            for (var i = 0; i < hearts.length; i++) {
                heart = hearts[i];
                if (heart.alpha <= 0) {
                    document.body.removeChild(heart.el);
                    hearts.splice(i, 1);
                    continue;
                }
                heart.y -= heart.alpha < 0.5 ? 2 : 1;
                heart.scale += 0.002;
                heart.alpha -= 0.013;
                heart.el.style.transform = 'scale(' + heart.scale + ')';
                heart.el.style.left = heart.x + 'px';
                heart.el.style.top = heart.y + 'px';
            }
            setTimeout(gameloop, 10)
        })();
    })(window, document);
</script>

</body>

</html>